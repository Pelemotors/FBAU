# 📑 קובץ הנחיות עבודה לקורסור (Hebrew)

מסמך זה מגדיר כללי עבודה אחידים ל־Cursor (ולכלי AI מסייעים) בכל הפרויקטים שלנו. המטרה: פיתוח מהיר, עקבי ובטוח, בשפה עברית, עם מינימום חיכוך וטעויות.

---

## 0) מטרה ו… TL;DR

* כתוב קוד **עם הערות קצרות בעברית** שמסבירות מה הפונקציה עושה ולמה.
* **אל תיגע/אל תיצור קבצי `.env`** ואל תבקש ערכים רגישים. רק תזכיר Placeholders.
* **הנחיה אחת בכל פעם**, מחכים לאישור לפני השלב הבא.
* עדכון קוד קיים יתבצע לפי **שיטה #3 – “שילוב חלקי”** (Search → Delete → Paste), עם ציון **נתיב קובץ מלא** ושורות/עוגנים ברורים.
* **שמור על מבנה הפרויקט הקיים**; אל תבצע רפקטורים רחבים בלי בקשה מפורשת.
* שימוש ב־**npm בלבד** (לא yarn/pnpm).
* **RTL** מלא בממשק, התאמה למובייל, ועמידה ב־ESLint/TypeScript Strict.
* היצמדות ל־**Asia/Jerusalem** כשמדובר בשעות/CRON.
* **אל תסיר משתנים “שאינם בשימוש”** – מצא דרך נכונה לשלבם במקומם.
* ב־Next.js: שימוש ב־`<Link>` **ללא** `<a>` פנימי, ושני כפתורי ניווט בכל דף־משנה: “חזרה” + “בית”.

---

## 1) מה לא עושים (Hard Don’ts)

1. **ENV / סודות**

   * לא יוצרים/לא עורכים קבצי `.env*` (כולל `.env.local`, `.env.production`).
   * לא מבקשים ולא שומרים סיסמאות/טוקנים/מפתחות.
   * במקום זה: מספקים **טמפלט Placeholders** ומציינים: *"יש למלא ידנית"*.
2. **גישה לחשבונות/פרופילים**

   * לא מבצעים Login אוטומטי לחשבונות אמיתיים. כשנדרש – **הדפדפן ייפתח גלוי בלבד** והמשתמש ישלים ידנית.
3. **רפקטור גורף**

   * לא משנים ארכיטקטורה/שמות תיקיות/מבנים מרכזיים ללא בקשה מפורשת.
4. **תלויות וכלים**

   * לא מוסיפים חבילות כבדות/לא נפוצות ללא נימוק. העדפה ל־Playwright/Prisma/React/Vite/Next הרשומים בדרישות.
5. **תמונות Placeholder**

   * לא לשלב תמונות דמה; אם נדרש מקור – לציין TODO ברור או לשחזר את דפוס החיפוש הקיים בקוד (MediaCarousel וכד’).

---

## 2) איך כן עובדים (Do’s)

1. **שיטה #3 – שילוב חלקי**

   * בכל תיקון קוד – לציין במדויק:

     1. מה לחפש בקובץ (טקסט עוגן/כותרת פונקציה).
     2. אילו שורות למחוק.
     3. היכן להדביק את הקטע החדש.
   * לציין **נתיב מלא** לקובץ (לדוגמה: `src/components/ui/Ad_Form_component/Car_Ads_EditAdForm.tsx`).
2. **שיטה #1 – קובץ חדש** (כאשר יוצרים קובץ):

   * לציין שם קובץ, מבנה תיקיות, מטרה, וקוד **מלא** שמוכן להדבקה.
3. **הערות בעברית בקוד**

   * בראש כל פונקציה/קומפוננטה: הערת־שורה קצרה בעברית: מה היא עושה ולמה.
   * להימנע מהצפת הערות – רק מה שמסייע למי שאינו מפתח להבין את ההיגיון.
4. **אישור בין שלבים**

   * לתת **הנחייה אחת** ולבקש אישור/פידבק לפני מעבר לשלב הבא.
5. **קונבנציות פיתוח**

   * TypeScript strict, ESLint תקין, שמות תיאוריים (עברית בטקסטים, אנגלית בקוד).
   * לוגים ממוקדים (לא להדפיס סודות/URLs רגישים).
6. **UI/UX**

   * RTL מלא, התאמה למובייל, ניגודיות טובה.
   * בכל דף משנה: שני כפתורים ברורים – “חזרה” ו“עמוד הבית” (שימוש ב־`next/navigation`).
   * ב־Next.js: שימוש ב־`<Link>` **ללא** `<a>` פנימי.
7. **ניהול פורטים וכתובות**

   * להשתמש בערכים מ־ENV דרך שכבת קונפיג; לא לקבע `localhost:5000` או `localhost:3000` בקוד.
   * אם חייבים זמנית – לציין TODO ולהפנות למפתח לעדכון ENV.
8. **זמן ואזור זמן**

   * כברירת מחדל להשתמש ב־`Asia/Jerusalem` בכל תזמון/CRON/תצוגת זמן.
9. **npm בלבד**

   * התקנות/סקריפטים עם `npm`. לא להשתמש ב־yarn/pnpm.

---

## 3) כללי קוד ספציפיים

* **אל תסיר משתנים שלא בשימוש** – אם קיימים, שלב אותם בהיגיון הנוכחי או ציין כיצד ישולבו בשלב הבא.
* **שמור על מבנה קיים** – הרחב בפונקציות קטנות נקודתיות.
* **שגיאות** – עטוף בקריאה מובנית עם הודעת שגיאה ידידותית; בלוגים להדפיס תקציר, לא סודות.
* **בדיקות ידניות** – לצרף צעדי בדיקה קצרים לאחר כל שינוי משמעותי.
* **קומיט מסג׳** – תבנית: `feat(scope): …`, `fix(scope): …`, `docs: …` (בעברית בתיאור אם רלוונטי).

---

## 4) Next.js / React – עקרונות

* `<Link>` ללא `<a>` בפנים; הקפדה על ESLint והעדפת פונקציות מ־`next/navigation`.
* שני כפתורי ניווט קבועים בדפי־משנה.
* RTL, Tailwind, התאמה למסכים קטנים.
* אין שימוש בתמונות Placeholder; אם חסר מקור – TODO + תיאור מה רצוי.

---

## 5) WhatsApp / דפדפן אוטומציה (אם קיים)

* **דפדפן תמיד גלוי (Headful)** בפעולות רגישות (QR/Login/פרסום) לצורך פיקוח המשתמש.
* QR או Login – רק **לאחר לחיצה מפורשת** של המשתמש (לא אוטומטי בעליית המערכת).
* איפוס סשן – חייב להוביל ל־QR חדש (לא לשמור חיבורים ישנים ללא בקשה).

---

## 6) אבטחה ופרטיות

* `.env*` ב־gitignore; סיסמאות/טוקנים לעולם לא בקוד/בלוגים.
* העדפת `https://` בלבד לקריאות חיצוניות; דגל שגיאה אם מופיע `http://`.
* אימות קלטים (URL/קבצים/תווים), מניעת Path Traversal, מגבלת גודל לקבצים.

---

## 7) תבנית `.env` (Placeholders בלבד – למילוי ידני)

```dotenv
# Supabase Configuration
VITE_SUPABASE_URL=<הכנס כאן את כתובת Supabase>
VITE_SUPABASE_ANON_KEY=<הכנס כאן את ה-ANON_KEY>

# Application Configuration
VITE_APP_NAME="<שם האתר>"
VITE_BASE_URL=<כתובת הפרויקט בפרודקשן או localhost>

# WhatsApp Configuration
VITE_WHATSAPP_PHONE=<מספר טלפון>
```

> שים לב: Cursor **לא** יוצר/עורך את הקובץ הזה. המשתמש ימלא ידנית.

---

## 8) פורמט משימות ל־Cursor

* **תמיד**: הנחיה אחת ברורה + ציון קבצים/נתיבים + תוצאת יעד.
* בקשה לשינוי קוד קיים → להשתמש ב־שיטה #3 – שילוב חלקי.
* בקשה ליצירת קובץ חדש → שיטה #1 – קובץ חדש מלא.

**דוגמת שילוב חלקי (שיטה #3):**

```
קובץ: src/app/loan/LoanRequestsPage.tsx
חפש: function renderTableHeader() {
מחק: את בלוק הפונקציה הקיים (עד הסוגר שלה)
הדבק אחרי: שורת הייבוא של React
קטע חדש: <הדבק כאן פונקציה מלאה עם הערות בעברית>
```

---

## 9) Checklist לפני סיום כל משימה

* [ ] הערות קצרות בעברית נוספו במקום הנכון.
* [ ] לא בוצעה נגיעה בקבצי `.env*`.
* [ ] נשמר מבנה הפרויקט; אין רפקטורים מיותרים.
* [ ] הוגדר RTL/מובייל (ב־UI).
* [ ] אין URLs קשיחים; שימוש בקונפיג/ENV.
* [ ] נוספו צעדי בדיקה ידניים קצרים.
* [ ] אין חשיפת סודות בלוגים/קוד/קומיטים.

---

## 10) קווים מנחים לתקשורת

* לענות בעברית מקצועית וברורה.
* לספק פקודות Copy-Paste כשנדרש (npm בלבד).
* לבקש אישור לפני המעבר לשלב הבא.
* אם משהו לא ברור – להציע פתרון חלקי עדיף על בקשת הבהרה.

---

**סוף מסמך.**
